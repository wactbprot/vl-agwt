% Template for Elsevier CRC journal article
% version 1.2 dated 09 May 2011

% This file (c) 2009-2011 Elsevier Ltd.  Modifications may be freely made,
% provided the edited file is saved under a different name

% This file contains modifications for Procedia Computer Science

% Changes since version 1.1
% - added "procedia" option compliant with ecrc.sty version 1.2a
%   (makes the layout approximately the same as the Word CRC template)
% - added example for generating copyright line in abstract

%-----------------------------------------------------------------------------------

%% This template uses the elsarticle.cls document class and the extension package ecrc.sty
%% For full documentation on usage of elsarticle.cls, consult the documentation "elsdoc.pdf"
%% Further resources available at http://www.elsevier.com/latex

%-----------------------------------------------------------------------------------

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                          %%
%% Important note on usage                                  %%
%% -----------------------                                  %%
%% This file should normally be compiled with PDFLaTeX      %%
%% Using standard LaTeX should work but may produce clashes %%
%%                                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% The '3p' and 'times' class options of elsarticle are used for Elsevier CRC
%% The 'procedia' option causes ecrc to approximate to the Word template
\documentclass[3p,times,procedia]{elsarticle}
\flushbottom

%% The `ecrc' package must be called to make the CRC functionality available
\usepackage{ecrc}
\usepackage[bookmarks=false]{hyperref}
    \hypersetup{colorlinks,
      linkcolor=blue,
      citecolor=blue,
      urlcolor=blue}
%\usepackage{amsmath}


%% The ecrc package defines commands needed for running heads and logos.
%% For running heads, you can set the journal name, the volume, the starting page and the authors

%% set the volume if you know. Otherwise `00'
\volume{00}

%% set the starting page if not 1
\firstpage{1}

%% Give the name of the journal
\journalname{Procedia Computer Science}

%% Give the author list to appear in the running head
%% Example \runauth{C.V. Radhakrishnan et al.}
\runauth{Oppermann et al.}

%% The choice of journal logo is determined by the \jid and \jnltitlelogo commands.
%% A user-supplied logo with the name <\jid>logo.pdf will be inserted if present.
%% e.g. if \jid{yspmi} the system will look for a file yspmilogo.pdf
%% Otherwise the content of \jnltitlelogo will be set between horizontal lines as a default logo

%% Give the abbreviation of the Journal.
\jid{pictures/Procs}

%% Give a short journal name for the dummy logo (if needed)
%\jnltitlelogo{Computer Science}

%% Hereafter the template follows `elsarticle'.
%% For more details see the existing template files elsarticle-template-harv.tex and elsarticle-template-num.tex.

%% Elsevier CRC generally uses a numbered reference style
%% For this, the conventions of elsarticle-template-num.tex should be followed (included below)
%% If using BibTeX, use the style file elsarticle-num.bst

%% End of ecrc-specific commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% The amssymb package provides various useful mathematical symbols

\usepackage{amssymb}
%% The amsthm package provides extended theorem environments
%% \usepackage{amsthm}

%% The lineno packages adds line numbers. Start line numbering with
%% \begin{linenumbers}, end it with \end{linenumbers}. Or switch it on
%% for the whole article with \linenumbers after \end{frontmatter}.
%% \usepackage{lineno}

%% natbib.sty is loaded by default. However, natbib options can be
%% provided with \biboptions{...} command. Following options are
%% valid:

%%   round  -  round parentheses are used (default)
%%   square -  square brackets are used   [option]
%%   curly  -  curly braces are used      {option}
%%   angle  -  angle brackets are used    <option>
%%   semicolon  -  multiple citations separated by semi-colon
%%   colon  - same as semicolon, an earlier confusion
%%   comma  -  separated by comma
%%   numbers-  selects numerical citations
%%   super  -  numerical citations as superscripts
%%   sort   -  sorts multiple citations according to order in ref. list
%%   sort&compress   -  like sort, but also compresses numerical citations
%%   compress - compresses without sorting
%%
%% \biboptions{authoryear}

% \biboptions{}

% if you have landscape tables
\usepackage[figuresright]{rotating}
%\usepackage{harvard}
% put your own definitions here:x
%   \newcommand{\cZ}{\cal{Z}}
%   \newtheorem{def}{Definition}[section]
%   ...

% add words to TeX's hyphenation exception list
%\hyphenation{author another created financial paper re-commend-ed Post-Script}

% declarations for front matter


\begin{document}
\begin{frontmatter}

%% Title, authors and addresses

%% use the tnoteref command within \title for footnotes;
%% use the tnotetext command for the associated footnote;
%% use the fnref command within \author or \address for footnotes;
%% use the fntext command for the associated footnote;
%% use the corref command within \author for corresponding author footnotes;
%% use the cortext command for the associated footnote;
%% use the ead command for the email address,
%% and the form \ead[url] for the home page:
%%
%% \title{Title\tnoteref{label1}}
%% \tnotetext[label1]{}
%% \author{Name\corref{cor1}\fnref{label2}}
%% \ead{email address}
%% \ead[url]{home page}
%% \fntext[label2]{}
%% \cortext[cor1]{}
%% \address{Address\fnref{label3}}
%% \fntext[label3]{}

\dochead{International Conference on Industry 4.0 and Smart Manufacturing}%%%
%% Use \dochead if there is an article header, e.g. \dochead{Short communication}
%% \dochead can also be used to include a conference title, if directed by the editors
%% e.g. \dochead{17th International Conference on Dynamical Processes in Excited States of Solids}

\title{Digital Transformation in Legal Metrology: \\ Building and integrating external digital workflows}

%% use optional labels to link authors explicitly to addresses:
%% \author[label1,label2]{<author name>}
%% \address[label1]{<address>}
%% \address[label2]{<address>}



\author[a]{Alexander Oppermann\corref{cor1}} 
\author[a]{Samuel Eickelberg}
\author[a]{Thomas Bock}
\author[a]{John Exner}
\author[b]{Wiebke Heeren}
\author[b]{Oksana Baer}
\author[b]{Clifford Brown}

\address[a]{Physikalisch-Technische Bundesanstalt (PTB), Abbestr. 2-12, 10587 Berlin, Germany}
\address[b]{Physikalisch-Technische Bundesanstalt (PTB), Bundesallee 100, 38116 Braunschweig, Germany}

\begin{abstract}
%% Text of abstract
Insert here your abstract text.
\end{abstract}

\begin{keyword}
Digital transformation \sep Metrological processes \sep Administrative shell \sep Digital Calibration Certificate \sep DCC \sep Declaration of Conformity \sep DOC \sep Distributed software architecture  \sep Weighing instruments \sep Legal Metrology \sep 

%% keywords here, in the form: keyword \sep keyword

%% PACS codes here, in the form: \PACS code \sep code

%% MSC codes here, in the form: \MSC code \sep code
%% or \MSC[2008] code \sep code (2000 is the default)

\end{keyword}
\cortext[cor1]{Corresponding author. Tel.: +49-30-3481-7483}
\end{frontmatter}

%\correspondingauthor[*]{Corresponding author. Tel.: +0-000-000-0000 ; fax: +0-000-000-0000.}
\email{alexander.oppermann@ptb.de}

%%
%% Start line numbering here if you want
%%
% \linenumbers

%% main text

%\enlargethispage{-7mm}
\section{Introduction}
\label{introduction}


\subsection{ Angewant}
``Angewant'' is a joint research project of six representatives from the weighing industry, the construction industry and science. The latter is divided into the National Metrology Institute PTB (Physikalisch-Technische Bundesanstalt), a regional agency for innovation and European affairs as well as the Institute for applied labor science (IfaA), responsible for socio-economics and human factors \cite{Ottersboeck2020System}.

%TODO Alex
- Angewant Project
\begin{itemize}
    \item short introduction to Legal Metrology
    \item Key Objectives 3-5 \cite{Eichstaett2020Metrologie}
    \item Distributed Software Architecture
    \item Service Hub
    \item Stakeholder: Manufacturer, User, Verification Authorities
\end{itemize}

    


\begin{nomenclature}
\begin{deflist}[A]
\defitem{PTB} \defterm{Physikalisch-Technische Bundesanstalt}
\defitem{DCC} \defterm{Digital Calibration Certificate}
\defitem{DOC} \defterm{Declaration of Conformity}
\end{deflist}
\end{nomenclature}




\subsection{SmartCom}
\begin{itemize}
    \item Project Background: goal, other partners
    \item Purpose of AP5
    \item Use Cases
\end{itemize}

Within the framework of the EMPIR project “Communication and validation of smart data in IoT-networks” SmartCom \cite{SmartCom}, see Fig. \ref{fig:SmartCom_logo}, the metrological and technical baseline for the exchange of metrological data has been established, in the form of the Digital System of Units (D-SI) and the framework conditions for DCCs. In order to validate the quality of data being exchanged, a novel test module for D-SI based data has been developed and integrated into the existing and well-established online validation system TraCIM [cite?] (Traceability for computational-intensive metrology, a service run at PTB). The project partners consortium consists of universities, metrology and research institutes as well as companies from weighting industry acting in EU. 

\begin{figure}
    \centering
    \includegraphics[angle=0, width=0.4\columnwidth]{pictures/Atlas_Smartcom.pdf}
    \caption{SmartCom project aims in developing the basis for an unambiguous, universal, safe and uniform communication of metrological data in IoT. }
    \label{fig:SmartCom_logo}
\end{figure}

Aim of workpackage 5 of SmartCom project is to develop a reliable, easy to use, validated and secure online conformity assessment procedure designed for cloud system applications for legal metrology. In this section of work, requirements for a user‐oriented and easy‐to‐establish online conformity assessment system that fulfils the general needs of legal preconditions was developed. The research focused on industrial users who develop sophisticated networks within digital networks and whose previous developments could not be taken to market due to national law restrictions.

\subsection{Vacuum metrology group}

The vacuum metrology group of PTB was founded in 1966 at the institute
Berlin \cite{jou19, jou04}. In addition to research and development,
the calibration of vacuum gauges falls within the laboratory's
responsibilities. To this objective, the group maintains the
realization and dissemination of the pressure scale from
$1\times10^{-9}\,$Pa to $1\,$kPa is. To cover this pressure
range, methods based on different physical laws are
realized by primary standards. These standards are used for research
but also for the calibration of vacuum gauges for customers. The customers
of the metrology group at PTB range from industry, calibration laboratories
to other metrology institutes.

At a glace, a calibration process runs as follows: Customers sent
their vacuum gauges which are installed at a primary standard. The
readings of these gauges are compared to a set of pressures generated
by means of the standard called the calibration pressures. The
results of the comparison are stated in a calibration certificate
as the deviation between reading and calibration pressure and the associated
measurement uncertainties. The number of calibrations was rising since the
founding of the laboratory: over the last decade from about 120 to
170 per year.  In order to manage this increase, efforts have been
made since the mid-1990s to automate the calibration systems
\cite{jouce3, joufm3}.

Digitization was also a design goal for the most
recently completed primary standard SE3. Here, the automation of
entire calibration process, from order acceptance to measurement and
return shipment, was thought along from the beginning. SE3 is used for
customer calibrations since 2019. Since 2020 the calibration results
have also been offered routinely in the form of a Digital Calibration
Certificate (DCC) described in section \ref{ssec:dcc}.  In section
\ref{ssec:vl-work} the complete workflow is presented based on the SE3
processes.

% In this process, emphasis is placed on
% the use of open source software.


%\begin{itemize}
%    \item Background: goal, other partners
%    \item Purpose of Calibrations
%    \item Use Cases
%\end{itemize}

% Allgemeine Erklärung Vaclab
% Was ist VacLab, Warum, sehr kurz präzise
% Hinleitung zum DCC und den Use Case erklären
% Von allgemein (Kalibrierung) zu speziell (DCC)
% Notwendigkeit der Digitalisierung
    

%\enlargethispage{12pt}

\section{Materials \& Methods}

\subsection{Digital Calibration Certificate}
\label{ssec:dcc}

To ensure the quality of the measuring equipment in industrial
processes, gauges have to be calibrated on a regular interval. The
DCC is an effort of the Physikalisch-Technische Bundesanstalt to provide
a unified way of transferring calibration results from machine (issuing authority) to
machine (calibration customer) without discontinuity of media. It
serves for the proof of metrological traceability and enhances 
manufacturing and quality monitoring processes.

The DCC is based on the internationally approved exchange format
XML (Extensible Markup Language). Beside the calibration results it
contains administrative information concerning the recipient and
issuing authority. It describes the methods used for calibration as well as
influence and environmental conditions.

% When designing the dcc, particular emphasis was placed on versatility.
% Units are given in machine-readable form. 

%% Example  Vacuum metrology group(?): receives DCC for voltage,
% issues pressure DCCs. e.g.:
% In many/some cases a laboratory is
% an issuer but also a receiver of a Digital Calibration Certificates... 

%% https://www.ptb.de/cms/en/forschung-entwicklung/mit-metrologie-in-die-zukunft/herausforderung-digitalisierung/kernziel1einheitlichkeitim/digital-calibration-certificate-dcc.html

% An important element of the DCC is the representation of units and
% measurement data with measurement uncertainties. For this purpose, a
% proposal for a data model was developed in the Opens external link
% in new windowEMPIR project SmartCom: the D-SI.


\textbf{OB: is it a subsection for SmartCom team?}

\subsection{IT at Vacuum metrology group}
\label{ssec:vlit}

Statically typed languages and relational databases are well suited
for well-defined requirements with a clearly formulated problem space.
The attempt to model the processes in the vacuum metrology lab with
these tools was abandoned after some setbacks in favour of an approach
with a schema-free database and dynamically typed languages.
The NoSQL database CouchDB \cite{couch} is the central infrastructure
element. CouchDB belongs to the class of document stores. It uses
Multi-Version Concurrency Control \cite{mvcc} and supports a master-master
replication mechanism. This mechanism is used to keep the database
instances running on each of the lab's measuring computers in sync.
Data is stored in self-contained JSON documents accessible via
REST \cite{fielding2000architectural} oriented http interfaces. The
modelling of the processes in the laboratory is achieved with the help of
these documents. There are a large number of them with a wide variety
of tasks. Examples are:

\begin{figure}
    \centering
    \includegraphics[angle=0, width=0.4\columnwidth]{pictures/vaclab_workflow.pdf}
    \caption{Workflow of calibration services in the vacuum metrology group. }
    \label{fig:vl-work}
\end{figure}

\begin{itemize}
  \item The \emph{servers document} is used to automate the
    replication of data.
  \item The \emph{todo documents} (\emph{tdo} in
    Figure~\ref{fig:vl-work}) describe the aim of the
    calibration. Here, target pressures, target temperatures and the
    number of measurement repetitions are defined.
  \item The \emph{measurement procedure definition} documents describe
    the steps of a calibration that have to be carried out. These
    descriptions are formulated in terms of a domain specific language
    with the idea that everything can be arranged in a sequential
    series of parallel steps.
  \item The \emph{calibration} documents (\emph{cal} in
    Figure~\ref{fig:vl-work}) are combinations of various
    sub-documents. They consist of dates, presettings, calibration
    objects with their parameters and serial numbers. Furthermore,
    fundamental physical constants, conversion factors as well as the raw data and
    the analysis of a calibration
    % of one customer gauge  and one specific calibration method
    is included.
    \item The \emph{DCC} documents are JSON documents with a structure
      analogue to the XML structure of the DCC. They are each derived
      from a calibration document and used to generate the DCC in the
      XML format by means of a template system.
\end{itemize}

Further documents and their function are introduced and discussed in
section \ref{ssec:vl-work}.

\subsection{Vacuum metrology group calibration workflow}
\label{ssec:vl-work}

In this section the modelling of calibration processes and their relation
to the database documents mentioned in section \ref{ssec:vlit} will be
discussed in more detail.  For this purpose the workflow is sketched
in Figure~\ref{fig:vl-work}. The workflow can be separated into different steps:

\begin{enumerate}
  
\item The calibration process starts with a \emph{calibration
  request}. Up to now, these requests were done by email or phone. A request
  should contain information about the class and number of devices to be
  calibrated. This kind of information is represented in the \emph{todo
    documents} % mentioned in section \ref{ssec:vlit} 
  (\emph{tdo} in Figure~\ref{fig:vl-work}).  The metrology group's database contains
  information about customers in the form of \emph{customer documents}
  (\emph{cus} in Figure~\ref{fig:vl-work}). For new customers such
  documents are generated. In this case address details and contact
  information are demanded. 
  
\item A \emph{customer document} and one or more
  \emph{todo documents} are combined to a \emph{planning document}
  (\emph{pla} in Figure~\ref{fig:vl-work}). Besides other functions,
  \emph{planning documents} are used to generate an offer letter for
  the customer via \LaTeX. They also serve as placeholders in the 
  calendar of the group to reserve the time slots for calibration.  % provided directly from the database.
  
\item In case the customer accepts the offer, a \emph{bureaucracy
  document} (\emph{bur} in Figure~\ref{fig:vl-work}) and a
  corresponding number of \emph{calibration documents} (\emph{cal1,
    cal2, ..} in Figure~\ref{fig:vl-work}) are derived from the
  \emph{planning document}. During this process, file numbers are
  assigned and calibration certificate numbers are allocated. The
  \emph{bureaucracy document} is used to generate the letter of
  confirmation and a declaration letter for the customer also via
  \LaTeX.

\item After the arrival of the customer's equipment, the next steps are mainly
  carried out on the \emph{calibration documents}. There is at least one of
  them for each of the devices under test (DUT). The database documents
  for the DUT, the \emph{calibration object documents} (\emph{cob1},
  \emph{cob2} ...  in Figure~\ref{fig:vl-work}) are inserted into
  the corresponding \emph{calibration document}. Beforehand, settings,
  connection parameters, serial numbers are checked and verified.

\item The DUTs are attached to the primary standard. Up to ten gauges
  can be handled in one calibration run. After the system is pumped
  down to an appropriate base pressure, a specific \emph{measurement
    procedure definition} is executed. Parameters like outgassing
  rate and additional volume introduced by the DUT are measured. Leak
  tests and checks of the performance of the temperature sensors are performed.
  Then the calibration is carried out and the measurement results as well as
  the analysis are stored in the \emph{calibration documents}.

\item The calibration processes itself is also defined by means of a
  \emph{measurement procedure definition document}.  For the
  generation of one target pressure about 400 steps have to be
  executed. It takes about 15 target pressures distributed over three
  orders of magnitude for a typical calibration of a vacuum
  gauge. Often different methods like the continuous expansion method,
  the static expansion method or a direct comparison with a pressure
  balance have to be combined.  %% \cite{}s for the methods?
  
\item The measurement is followed by a detailed analysis of the data
  obtained during the calibration. Parameters such as offset scatter,
  viscosity parameters and temperature corrections are calculated in addition to the
  calibration target agreed in the \emph{todo document}.
  Here, special attention is payed to the read-only access of raw
  data. The derived data are stored in a separate section of the
  \emph{calibration document}.
  
\item The generation of the \emph{certificate documents} (\emph{cer}
  in Figure~\ref{fig:vl-work}) follows.  These documents are derived
  from the \emph{calibration documents}. With the help of the
  \emph{certificate documents} a printable version of the calibration
  certificate is generated via \LaTeX. Its digital version is the
  basis for a second analysis: a further program crosschecks the
  measured and calculated data.
  
\item Since 2020, the \emph{certificate documents} are used for the
  generation of a JSON version of the DCC (\emph{dcc} in
  Figure~\ref{fig:vl-work}). This document allows the generation of the DCC
  in XML format with low effort. A validation of the DCC is automatically performed.

\item The workflow is completed with the return of the customer's
  equipment. The shipping label is generated by means of the 
  \emph{bureaucracy document} via \LaTeX.
\end{enumerate}



\subsection{Declaration of Conformity}

\begin{itemize}
    \item Use Case
    \item XML Schema (take info from D6)
    \item Workflow: Upload, Download, Creation
    \item Implentation independent service integration
\end{itemize}

\subsubsection{Workflow: Upload, Download, Creation}
The online conformity assessment system consists of the following parts:
\begin{itemize}
    
\item A unified user interface; a browser application for viewing documents, applying and validating the electronic signature.
\item A security concept for the transmission of metrological information outside the restricted and economic environment [9], [10], using Representational State Transfer (REST), a well-established architectural style using the HTTP protocol.
\item An XML‐based validation schema [14], including frameworks of the EU DoC. The exchange of documents will be enabled by an online storage system. 
Similar to the procedure described in section V, the client uploads an XML file with the device information, such as type, manufacturer etc. As the next step the XML file is secured, by application of a digital signature [24]. The signed XML file is then uploaded to a OOS for the verification. The verification is based on EU DoC requirements. As a test output, the client receives a success or failure statement and a human readable version of the XML file. The entire workflow of the verification process was realised on the platform developed within the AnGeWaNt project [25].
\end{itemize}

\subsection{Platform Architecture}
%TODO Samuel
\begin{itemize}
    \item API / Interfaces 
    \item Service Architecture 
    \item Statusmeldung
\end{itemize}


\section{Results}
Implementation Results

\subsection{VacLab}


  For the cooperation with AnGeWaNt
  project, a third way was implemented in the form of a REST
  interface. 


%Austausch mit Angewant
% Welche Anpassungen waren notwendig
% Hamronisierte REST Schnittstellen vorteilhaft

\subsection{Angewant}
\begin{itemize}
    \item digital certificates and declaration % TODO: Harmonized XML definition, es ist validierbar (Samuel)
    \item trigger service from unified interfaces % TODO: Hintergrundabfrage der Zertifikate und Statusupdates an Angewant per PUT (Samuel)
    \item lesson learned % Verbindliche Absprachen, stabile Versionen (2 Systeme in dynamischer Entwicklung schwer abzustimmen)
    \item Integrity % TODO andeuten und in Future Work mehr ausführen. Ist im Archive-Service schon da, wird aber noch nicht genutzt. (Samuel)
\end{itemize}

% TODO: Ablaufdiagramm DCC-Service - GUI -> Service -> VacLab -> Antwort (Samuel)
% TODO: Beschreibung auf Basis des Dagramms (Samuel) mit unified Standards and Interfaces, implementation independent etc.

\section{Conclusion and Future Work}
\begin{itemize}
    \item Summarize Results and give an outlook to the future 
    \item Validation \& Integrity as a Service (VaaS)
\end{itemize}

\section*{Acknowledgements}

The presented results are part of the project "AnGeWaNt - Arbeit an geeichten Waagen für hybride Wiegeleistungen an Nutzfahrzeugen" (FKZ: 02L17B050). We would like to thank the German Federal Ministry of Education and Research (BMBF) and the European Social Fund (ESF) for funding this research project. Both projects are implemented by the Project Management Agency Karlsruhe (PTKA). The authors are responsible for the content of this publication.

%% The Appendices part is started with the command \appendix;
%% appendix sections are then done as normal sections
%% \appendix

%% \section{}
%% \label{}

\appendix
\section{An example appendix}
Authors including an appendix section should do so before References section. Multiple appendices should all have headings in the style used above. They will automatically be ordered A, B, C etc.



\bibliographystyle{elsarticle-harv}
\bibliography{references}
 
\end{document}

%%
%% End of file `procs-template.tex'.
